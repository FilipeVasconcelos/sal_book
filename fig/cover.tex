\begin{tikzpicture}
\sbStyleBloc{blue!20!black!30!green,very thick}
\sbEntree{E}
\sbComp{a}{E}
\sbRelier[$E$]{E}{a}
\sbBloc{b}{$H_1$}{a}
\sbRelier[$\epsilon$]{a}{b}
\sbBlocL{c}{$H_2$}{b}
\sbStyleBloc{blue,very thick}
\sbComph{d}{c}
\sbRelier[u]{c}{d}
\sbBlocL{e}{$H_3$}{d}
\sbBlocL{f}{$H_4$}{e}
\sbSortie[5]{S1}{f}
\sbRelier{f}{S1}
\sbNomLien[0.8]{S1}{$S$}
\sbDecaleNoeudy[-4]{f}{u}
\sbDecaleNoeudy{e}{v}
\sbStyleBloc{red,very thick}
\sbBlocr{r1}{$R_1$}{u}
\sbBlocr{r2}{$R_2$}{v}
\sbBlocrL{r3}{$R_3$}{r2}
\sbRelieryx{f-S1}{r1}
\sbRelierxy[$n_1$]{r1}{d}
\sbRelieryx{e-f}{r2}
\sbRelierxy[$n_2$]{r3}{a}
\end{tikzpicture}
