%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{\'Echelle logarithmique et le décibel~\label{annexe-log}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
En automatique, l'échelle logarithmique est très fréquemment 
utilisée pour permettre la représentation
graphique de variables dont les valeurs s'étalent sur plusieurs ordres 
de grandeur. Pour les diagrammes de Bode, il est courant de représenter le gain 
d'un \gls{slci}~en décibel \textbf{dB} qui est également une unité liée au 
logarithme décimale. La maitrise du calcul logarithmique est donc indispensable
pour l'établissement d'un diagramme de Bode.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Rappel sur le logarithme décimal}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Le logarithme décimal (noté $\log$ ou $\log_{10}$) est le logarithme en base 10.
La propriété principale du logarithme est de transformer un produit en 
somme\footnote{C'est pour cette propriété qu'il fut introduit par John Napier 
en 1614 pour faciliter les calculs de produit quelconque en établissant une 
correspondance avec la somme de logarithme à l'aide de tables de logarithme, 
ceci avant le développement de calculateur numérique performant.}.

Formellement, la fonction logarithme décimal $\log{(x)}$ est défini 
analytiquement par 
\[
\log{(x)}=\dfrac{\ln{(x)}}{\ln{(10)}}
\]
où la fonction $\ln{x}$ est la fonction logarithme néperien (c.-à-d. en base 
naturelle $e$) 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\paragraph{Propriétés}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%-------------------------------------------------------------------------------
\begin{itemize}
    \item $\log{(ab)}=\log{(a)} + \log{(b)}$
    \item $\log{\left(\dfrac{a}{b}\right)}=\log{a} - \log{(b)}$
    \item $\log{(a^n)}=n\log{(a)}$
    \item $\log{\sqrt[n]{(a)}}=\dfrac{1}{n}\log{(a)}$
    \item $\log(x)=a \Leftrightarrow x=10^a $; $\log(1) = 0$; 
          $\log(10) = 1$ ; $\log(0.1) = -1$
\end{itemize}
%-------------------------------------------------------------------------------
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{\'Echelle logarithmique décimale}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Sur une \textbf{échelle linéaire} décimale classique, des couples de 
graduations dont la \textbf{différence} ($\Delta$ ci-dessous) vaut 10 sont à 
égales distances. 
%-------------------------------------------------------------------------------
\begin{center}
    \tikzsetnextfilename{log_1-annexe_log-ext}
    \input{tikz/log_1-annexe_log.tex}
\end{center}
%-------------------------------------------------------------------------------
Sur une \textbf{échelle logarithmique} décimale, des couples de graduations 
dont le \textbf{rapport} ($\alpha$ ci-dessous) vaut 10 sont à égales distances.
%-------------------------------------------------------------------------------
\begin{center}
    \tikzsetnextfilename{log_2-annexe_log-ext}
    \input{tikz/log_2-annexe_log.tex}
\end{center}
%-------------------------------------------------------------------------------
On généralise cette l'égalité entre le rapport et n'importe quelle 
distance constante sur l'axe à échelle logarithmique.
%-------------------------------------------------------------------------------
\begin{center}
    \tikzsetnextfilename{log_3-annexe_log-ext}
    \input{tikz/log_3-annexe_log.tex}
\end{center}
%-------------------------------------------------------------------------------
On remarquera que dans le cas ci-dessus, les valeurs 16,32 et 64 n'ont pas 
de graduation qui leurs sont propres mais ces valeurs sont bien déterminées 
par la distance constante entre deux graduation de rapport $\alpha=2$. 

Il existe une terminologie pour se référer à des rapport $\alpha$ particuliers,
on parle d'\textbf{octave}\footnote{Pour le lecteur mélomane, celà correspond à
la définition de l'octave musicale. Par exemple, l'octave supérieur du 
La (noté La4) de fréquence \SI{440}{\hertz} est de fréquence égale à 
\SI{880}{\hertz} (noté La3).} lorsque $\alpha=2$ et de \textbf{décade} 
lorsque $\alpha=10$

Avec cette terminologie, une atténuation du gain d'une réponse harmonique de 
\SI{-20}{\dB} lorsque la pulsation augmente d'un facteur 10, se dira 
\SI{-20}{\dB\per\dec} ou \SI{-6}{\dB\per\oct}.

%\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Le décibel}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Le bel (B) est une unité de grandeur sans dimension 
exprimant la valeur relative entre deux quantités (de puissances en 
particuliers) par le logarithme décimal de leur rapport. Le décibel (\si{\dB}), 
plus couramment utilisé, est définie comme un dixieme de bel, et donc 
correspond à dix fois le logarithme décimal du rapport.
\[
X_{dB}=10\log{\dfrac{P_s}{P_e}}
\]
Le gain en décibel reporté sur un diagramme de Bode correspond à 
la valeur relative à 1 du carré du gain $G$ (le carré de l'amplitude d'un 
signal pouvant être défini comme une puissance). Ainsi,
\[
G_{dB}=10\log{G^2} = 20\log{G}
\]
Nous rappellons que le gain $G(\omega)$, dit naturel, est le module de la
fonction de transfert $G(\omega)=|H(\jw)|$. Le~\cref{tab-equiv_dB} donne 
l'équivalence entre le gain naturel $G$ et gain décibel $G_{dB}$ pour 
différentes valeurs particulières frequemment rencontrées dans ce cours.
%-------------------------------------------------------------------------------
\begin{table}[!t]
    \begin{tabular}{@{}P{1cm}P{1cm}P{1cm}P{1cm}P{1cm}
                       P{1cm}P{1cm}P{1cm}P{1cm}P{1cm}@{}}
    \toprule
    $G$      & 0.01&0.1&0.5     &$\sqrt{2}/2$&1&$\sqrt{2}$&2       &10&100   \\
    \midrule
    $G_{dB}$ & -40 &-20&$\sim$-6&$\sim$-3    &0&$\sim$3   &$\sim$6 & 20 & 40 \\
    \bottomrule
    \end{tabular}
    \caption{\'Equivalence entre gain naturel $G$ et gain 
             décibel $G_{dB}$. D'après~\cite{laroche}\label{tab-equiv_dB}}
\end{table}
%-------------------------------------------------------------------------------
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Diagramme de Bode}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Un diagramme de Bode d'un fonction complexe $H(\jw)$ est composé de deux 
courbes (c.-à-d. gain et phase) en représentation semi-logarithmique.

Soit la fonction complexe du premier ordre telle que 
%-------------------------------------------------------------------------------
\begin{align}
    H(\jw)=\dfrac{1}{1+\jw}\label{eq-ft_annexe}
\end{align}
%-------------------------------------------------------------------------------
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\paragraph{Tracé du gain}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Le gain de cette fonction de transfert $G(\omega)=|H(\jw)|$ s'écrit :
\[
    G(\omega)=\dfrac{1}{\sqrt{1+\omega^2}}
\]
le gain en décibel est donc :
\[
    G_{dB}(\omega)=20\log{\dfrac{1}{\sqrt{1+\omega^2}}}
                  =-20\log{\sqrt{1+\omega^2}}
\]
C'est cette fonction qu'il faut tracer point par point sur le diagramme 
de Bode, cependant il est généralement recommandé d'étudier les asymptotes 
de cette fonction avant de tracer la courbe. Pour les basses fréquences, le 
gain en décibel ce commporte comme 
\[
    G_{dB}(\omega)\sim-20\log{1}\sim 0\text{dB}
\] 
et pour les hautes fréquences, comme
\[
    G_{dB}(\omega)\sim -20\log{\omega}.
\]
Dans le cas des hautes fréquences, lorsque la pulsation est mutiplié par 
10 (c.-à-d. une décade ) le gain diminue de \SI{-20}{\dB}, on dit également 
qu'à haute fréquence le gain possède une pente de \textbf{-20dB par décade}. 
La pulsation de coupure est ici de $\omega_{c}=1$, c'est cette pulsation qui 
marque la \og séparation\fg entre basses et hautes fréquences. 
%-------------------------------------------------------------------------------
\begin{figure}[!t]
    \centering
    \tikzsetnextfilename{bode_1-annexe_log-ext}
    \input{tikz/bode_1-annexe_log.tex}
    \tikzsetnextfilename{bode_2-annexe_log-ext}
    \input{tikz/bode_2-annexe_log.tex}
    \caption{Diagramme de Bode d'un système du premier ordre.
    \label{fig-bode_annexe}}
\end{figure}
%-------------------------------------------------------------------------------
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\paragraph{Tracé de la phase}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
La phase $\phi(\omega)$ correspond à l'argument principale (\Cref{annexe-NC}) 
de la fonction complexe $H(\jw)$.
\[
\phi(\omega)=\arg{H(\jw)}=-\arg{(1+\jw)}=-\arctan{\omega}
\]
C'est cette fonction $\phi(\omega)$ qu'il faut tracer point par point 
sur le diagramme de Bode, mais comme précedemment
il est conseillé de déterminer les asymptotes à basse et haute fréquence.
\`A basse fréquence, la phase se comporte comme,
\[
\phi(\omega)\sim 0
\] 
et à haute fréquence, comme, 
\[
\phi(\omega)\sim -\dfrac{\pi}{2}.
\]
Les asymptotes sont une approximation bien plus 
grossière dans le cas de la phase. 
En générale, il est recommandé de 
calculer la phase pour des valeurs particulières de la 
pulsation. Par exemple, à la pulsation de coupure, 
lorsque $\omega=$1, la phase est de -45\degreeSI, en effet,
\[
\phi(1)=-\arg{(1+\jw)}=-\dfrac{\pi}{4}
\]
La~\cref{fig-bode_annexe} présente le diagramme de Bode associé à 
la fonction de transfert de l'\cref{eq-ft_annexe}.
%\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Tracé d'un diagramme de Bode avec Scilab}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Deux fonctions permettent de tracer un diagramme de Bode avec Scilab.
%-------------------------------------------------------------------------------
\begin{itemize}
    \item \verb?bode(syslin,fMin,fMax)? trace le diagramme de Bode réel. 
          Cette fonction prend pour argument \verb?sys? un système linéaire 
          comme défini à l'~\Cref{annexe-scilab}, \verb?fMin? et \verb?fMax? 
          une fréquence minimal et maximal (en \si{\hertz} sauf si un 
          4ème argument est donné). 
    \item \verb?bode_asymp(syslin,fMin,fMax)? trace le diagramme asymptotique.
\end{itemize}
%-------------------------------------------------------------------------------
%-------------------------------------------------------------------------------
\begin{Scilabcode}
scf(grf);clf(grf);grf=grf+1;
fMin =0.01,fMax=100;
p=poly(0,'p')
PremierOrdre=syslin('c',[1],[1+p])
//-----------------------------------
// diagrammme de Bode
//-----------------------------------
bode(PremierOrdre,fMin,fMax,"rad");
// ----------------------------------
// diagrammme de Bode asymptotique
//-----------------------------------
bode_asymp(PremierOrdre,fMin,fMax);
\end{Scilabcode}
%-------------------------------------------------------------------------------
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%annexe_log.tex
