#!/bin/bash
texname=figsonly

cat > ${texname}.tex <<EOF
\documentclass[a4paper]{article}
\usepackage{graphicx}
\usepackage{verbatim}
\begin{document}
EOF
for file in figtikz/*.eps
do
    larg=`grep "%%BoundingBox:" $file | awk '{print $4-$2}'`
    larg=`echo $larg | sed -e 's/ //g'`
    larg=$(($larg+0))
    
    echo "\begin{figure}[!htbp]"                 >> ${texname}.tex  
    echo "\centering"                            >> ${texname}.tex  
    if [ $larg -gt 400 ]
    then
        echo "larger" $larg $file
        echo "\includegraphics[width=\textwidth]{$file}"      >> ${texname}.tex
    else
        echo "\includegraphics{$file}"             >> ${texname}.tex
    fi
    echo "\verb?$file?"                          >> ${texname}.tex  
    echo "\end{figure}"                          >> ${texname}.tex  
    echo ""                                      >> ${texname}.tex
    echo "\vspace{1cm}"                          >> ${texname}.tex
done
echo "\end{document}" >> ${texname}.tex

latex ${texname}.tex
dvips -o ${texname}.ps ${texname}.dvi &> /dev/null
ps2pdf -sPAPERSIZE=a4 -dNOSAFER -dAutoRotatePages=/None ${texname}.ps &> /dev/null 
