\begin{tikzpicture}
    \sbEntree{E}
    \sbComp{comp1}{E}
    \sbRelier[$E$]{E}{comp1}
    \sbStyleBloc{col3}
    \sbBloc{h1}{$H_1$}{comp1}
    \sbRelier[$\epsilon$]{comp1}{h1}
    \sbCompSum{sum1}{h1}{+}{}{+}{}
    \sbRelier{h1}{sum1}
    \sbBloc{h2}{$H_2$}{sum1}
    \sbRelier{sum1}{h2}
    \sbComph{comp2}{h2} 
    \sbRelier{h2}{comp2}
    \sbStyleBloc{col1}
    \sbBlocL{h3}{$H_3$}{comp2}
    \sbBlocL{h4}{$H_4$}{h3}
    \sbSortie[5]{S1}{h4}
    \sbRelier{h4}{S1}
    \sbNomLien[0.8]{S1}{$S$}
    \sbDecaleNoeudy[-4]{h4}{u}
    \sbDecaleNoeudy{h3}{v}
    \sbBlocr{r1}{$R_1$}{u}
    \sbStyleBloc{col4}
    \sbBlocr{r2}{$R_2$}{v}
    \sbBlocrL{r3}{$R_3$}{r2}
    \sbRelieryx{h4-S1}{r1}
    \sbRelierxy[$n_1$]{r1}{comp2}
    \sbRelieryx{h3-h4}{r2}
    \sbRelierxy[$n_2$]{r3}{comp1}
    \node[above =of sum1] (aa) {}; 
    \draw[thick,-latex] (aa) node[right,yshift=-1em] {$P$} --(sum1.north);
\end{tikzpicture}
